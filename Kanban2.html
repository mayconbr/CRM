<!DOCTYPE html>
<html lang="br">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" type="text/css" href="site.css">
    <title>GP Audax - CRM</title>
</head>
<body>
    <input type="checkbox" id="check" checked>
    <!--comeco do header-->
        <header>
            <label for="check">
                <ion-icon name="menu-outline" id="sidebar_btn"></ion-icon>
            </label>
            <div class="left"></div>
        </header>
        <!--final do header-->
        <!--comeco da sidebar-->
        <div class="sidebar">
            <span><img src="logo-small.png" alt="Audax"></span>
            <a href="Home.html"><ion-icon name="home-outline"></ion-icon><span>Home</span></a>
            <a href="Cadastro.html"><ion-icon name="person-outline"></ion-icon><span>Cadastro</span></a>
            <a href="Notificacao.html"><ion-icon name="notifications-outline"></ion-icon><span>Notificações</span></a>
            <a href="Pastas.html"><ion-icon name="document-outline"></ion-icon><span>Pastas</span></a>
            <a href="Kanban2.html"><ion-icon name="easel-outline"></ion-icon><span>Kanban</span></a>
            <a href="Configuracao.html"><ion-icon name="settings-outline"></ion-icon><span>Configurações</span></a>
        </div>
        <!--final da sidebar -->
        <container>
            <main>
                <div class="form-style">
                    <input
                    class="input-pesquisa"
                    id="input-pesquisa"
                    placeholder="Pesquisar por cedente ..."/> 
                <div class="container-boards">
                    <div class="quadrado-board">
                        <h3>Em levantamento</h3>
                        <div class="card"
                             draggable="true">
                            <div class="barra-status-kanban"></div>
                            <p>Cliente: GrandPneus</p>
                            <p>Operador: Pedro</p>
                        </div>
                    </div>
                    <div class="quadrado-board">
                        <h3>A analisar</h3>
                        <div class="card"
                             draggable="true">
                            <p>Cliente: GrandPneus</p>
                            <p>Operador: Pedro</p>
                        </div>
                        <div class="card"
                             draggable="true">
                            <p>Cliente: GrandPneus</p>
                            <p>Operador: Pedro</p>
                        </div>
                    </div>
                    <div class="quadrado-board">
                        <h3>A visitar</h3>
                        <div class="card"
                             draggable="true">
                            <p>Cliente: GrandPneus</p>
                            <p>Operador: Pedro</p>
                        </div>
                        
                    </div>
                    <div class="quadrado-board">
                        <h3>Aguardando Doc</h3>
                        <div class="card"
                             draggable="true">
                            <p>Cliente: GrandPneus</p>
                            <p>Operador: Pedro</p>
                        </div>
                    </div>
                    <div class="quadrado-board">
                        <h3>Aguardando Operação</h3>
                        <div class="card"
                             draggable="true">
                            <p>Cliente: GrandPneus</p>
                            <p>Operador: Pedro</p>
                        </div>
                    </div> 
                </div>
            </div>
            </main>
        </container>
    </div>
    <script type="module" src="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.esm.js"></script>
    <script nomodule src="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.js"></script>
    <script>
        const colums = document.querySelector(".quadrado-board");

        document.addEventListener("dragstart", (e) =>{
            e.target.classList.add("dragging");
        });

        document.addEventListener("dragend", (e) =>{
            e.target.classList.remove("dragging");
        });

        colums.forEach((item) =>{
            item.addEventListener("dragover", (e) =>{
            const dragging = document.querySelector(".dragging");
            const applyAfter = getNewPosition(item, e.clientY); 
            });
        });

        function getNewPosition(colums,posY){
            const cards =  colums.querySelectorAll(".card:not(.dragging)");
            let result;

            for (let refer_card of cards){
                const box = refer_card.getBoundingClientReact();
                const boxCenterY = box.y + box.height / 2;

                if(posY >= boxCenterY) result = refer_card;
            }

            return result;
        }
    </script>
</body>
</html>